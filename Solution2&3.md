# Задания 2 и 3

## Задание 2

### Формулировка задания

Некоторые события нужно продавать с дополнительными типами билетов-
льготный и групповой, у которых будут свои цены и название. Имеется информация,
что вероятно, будут другие типы билетов, которые нужно будет добавить. Нужно уметь сохранять при заказе 2 дополнительных
типа билета,
льготный и групповой в бд. Задача - Нормализовать
таблицу учитывая добавленные типы билетов

### Решение

* Будет создана дополнительно к ```orders``` одна таблица, включающая поля:

```tickets```

| Параметр | Тип | Комментарий                               |
|----------|-----|-------------------------------------------|
| id       | int | Уникальный id билета                      |
| order_id | int | ID заказа из таблицы orders(внешний ключ) |
| type     | int | Тип билета(0 - льготный, 1 - групповой)   |
| quantity | int | Количество билетов данного типа           |
| price    | int | Цена одного "специального" билета         |

* В данном случае type логичнее сделать int, это ускорит select и update запросы, т.к поиск по int значению гораздо
  быстрее, чем по str. Если билетов будет больше, чем 2, можно в локальную переменную записать информацию о типе билета.
  Пример: 0 - льготный, 1 - групповой.
* Отношение между таблицей ```orders``` и ```tickets``` - один ко многим. У одного заказа может быть несколько "
  специальных"(льготных) билетов, что хорошо с точки зрения нормализации.
* order_id - внешний ключ к таблице orders.

## Задание 3

### Формулировка задания

Часто посетители из одного заказа приходят не одновременно на события. Возникает необходимость проверять их билеты по
отдельности. Для этого у каждого билета должен быть свой баркод. Если в одном заказе было куплено несколько билетов, 2
взрослых, 3 детских, 4 льготных - то должно быть 9 баркодов для каждого билета соответственно. Задача - Нормализовать
таблицу, учитывая что у каждого билета свой баркод, показать конечный вид таблицы. Объяснить свое решение.

### Решение

* В данном случае необходимо в таблицу ```orders``` добавить поле ```barcode```.
* Итоговая таблица ```tickets``` будет иметь вид:

| Параметр | Тип     | Комментарий                               |
|----------|---------|-------------------------------------------|
| id       | int     | Уникальный id билета                      |
| order_id | int     | ID заказа из таблицы orders(внешний ключ) |
| barcode  | varchar | Уникальный баркод для билета              |
| type     | int     | Тип билета(0 - льготный, 1 - групповой)   |
| quantity | int     | Количество билетов данного типа           |
| price    | int     | Цена одного "специального" билета         |

* Отношение между таблицами не изменилось: по-прежнему один ко многим.
* Позволит по barcode проверять каждый отдельный билет.
* Поскольку в задании присутствовала формулировка "возникает необходимость проверять их билеты по отдельности" можно
предположить, что необходимо будет в таблицу добавить поле ```status```, которое будет принимать два значения: 0 и 1; Посетитель явился или нет. 
Удобно для статистики.
* Данная таблица также будет иметь отношение "один ко многим" к таблице ```visiter```, где будут личные данные посетителей(предполагаю)


